<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏ú‡∏ô‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏£‡∏≤‡∏¢‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏û.‡∏®. 2569 (Updated)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            height: 300px;
            max-height: 300px;
            margin: 0 auto;
        }
        .logic-step {
            transition: all 0.2s ease-in-out;
        }
        .logic-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        .active-nav {
            background-color: #e0f2fe; /* sky-100 */
            color: #0369a1; /* sky-700 */
            border-right: 4px solid #0284c7; /* sky-600 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex overflow-hidden selection:bg-sky-200 selection:text-sky-900">

    <!-- Sidebar -->
    <aside class="w-72 bg-white shadow-xl z-20 hidden lg:flex flex-col h-full border-r border-slate-200 flex-shrink-0">
        <div class="p-6 border-b border-slate-100 bg-slate-50">
            <h1 class="text-xl font-bold text-slate-800 leading-tight">Strategic IT Plan</h1>
            <p class="text-sm font-medium text-sky-600 mt-1">FY 2569 (Updated)</p>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4 space-y-1" id="sidebar-nav">
            <!-- Nav Items injected via JS -->
        </nav>

        <div class="p-4 border-t border-slate-100 bg-slate-50">
            <div class="bg-white rounded-lg p-4 border border-slate-200 shadow-sm">
                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Total Budget</p>
                <div class="flex items-baseline mt-1">
                    <span class="text-xl font-bold text-slate-800">6.80</span>
                    <span class="text-xs text-slate-500 ml-1">‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-1.5 mt-2">
                    <div class="bg-emerald-500 h-1.5 rounded-full" style="width: 15%"></div>
                </div>
                <p class="text-[10px] text-slate-400 mt-1 text-right">‡πÄ‡∏ö‡∏¥‡∏Å‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß ~15%</p>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-full relative overflow-hidden">
        
        <!-- Mobile Header -->
        <header class="lg:hidden bg-white border-b border-slate-200 p-4 flex justify-between items-center z-20 shadow-sm">
            <h1 class="font-bold text-slate-800">IT Plan 2569</h1>
            <button onclick="toggleMobileMenu()" class="text-slate-500 hover:text-slate-700 p-1 border rounded bg-slate-50">
                Menu
            </button>
        </header>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu" class="hidden absolute inset-0 bg-slate-800/50 z-30 lg:hidden" onclick="toggleMobileMenu()">
            <div class="absolute right-0 top-0 bottom-0 w-64 bg-white shadow-xl flex flex-col" onclick="event.stopPropagation()">
                <div class="p-4 border-b">
                    <h2 class="font-bold">Menu</h2>
                </div>
                <nav class="flex-1 overflow-y-auto p-2 space-y-1" id="mobile-nav-list">
                    <!-- Mobile Nav Items injected via JS -->
                </nav>
            </div>
        </div>

        <!-- Scrollable Content Area -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth" id="content-area">
            
            <!-- VIEW: DASHBOARD -->
            <section id="view-dashboard" class="fade-in max-w-6xl mx-auto">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800 mb-2">‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ (Executive Summary)</h2>
                    <p class="text-slate-600 text-lg max-w-3xl">‡πÅ‡∏ú‡∏ô‡πÅ‡∏°‡πà‡∏ö‡∏ó‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏â‡∏ö‡∏±‡∏ö‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á ‡∏°‡∏∏‡πà‡∏á‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏™‡∏π‡πà‡∏ú‡∏•‡∏™‡∏±‡∏°‡∏§‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡πà‡∏≤‡∏ô 5 ‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î <span class="font-semibold text-sky-600 bg-sky-50 px-1 rounded">Logic Model</span> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ</p>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <p class="text-xs text-slate-500 font-bold uppercase">Total Weight</p>
                        <p class="text-3xl font-bold text-slate-800 mt-1">100% <span class="text-sm font-normal text-slate-400">Re-weighted</span></p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <p class="text-xs text-slate-500 font-bold uppercase">Budget Cap</p>
                        <p class="text-3xl font-bold text-blue-600 mt-1">6.8 <span class="text-sm font-normal text-slate-400">‡∏•‡πâ‡∏≤‡∏ô‡∏ö‡∏≤‡∏ó</span></p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <p class="text-xs text-slate-500 font-bold uppercase">Training Target</p>
                        <p class="text-3xl font-bold text-emerald-600 mt-1">80% <span class="text-sm font-normal text-slate-400">‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</span></p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
                        <p class="text-xs text-slate-500 font-bold uppercase">System Uptime</p>
                        <p class="text-3xl font-bold text-indigo-600 mt-1">99.5% <span class="text-sm font-normal text-slate-400">SLA</span></p>
                    </div>
                </div>

                <!-- Chart & Pillars Overview -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Chart -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm lg:col-span-1">
                        <h3 class="font-bold text-slate-800 mb-4 text-center">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (Budget Allocation)</h3>
                        <div class="chart-container">
                            <canvas id="budgetChart"></canvas>
                        </div>
                        <div class="mt-4 text-center text-xs text-slate-500">
                            *‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà (91%) ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Pillar 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
                        </div>
                    </div>

                    <!-- 5 Pillars List -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm lg:col-span-2">
                        <h3 class="font-bold text-slate-800 mb-4">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ 5 ‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (Strategic Pillars Status)</h3>
                        <div class="space-y-4">
                            <!-- P1 -->
                            <div onclick="switchView('pillar-1')" class="group cursor-pointer flex items-center p-3 rounded-lg border border-slate-100 hover:bg-sky-50 hover:border-sky-200 transition-colors">
                                <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-lg mr-4 group-hover:bg-blue-600 group-hover:text-white transition-colors">1</div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-slate-700 group-hover:text-blue-700">Infrastructure</h4>
                                    <p class="text-xs text-slate-500">MA, Hardware Refresh, HCI Study</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-xs font-mono font-bold text-slate-600">Weight: 82%</span>
                                    <div class="text-[10px] text-emerald-600 font-medium">On Track</div>
                                </div>
                            </div>
                            <!-- P2 -->
                            <div onclick="switchView('pillar-2')" class="group cursor-pointer flex items-center p-3 rounded-lg border border-slate-100 hover:bg-sky-50 hover:border-sky-200 transition-colors">
                                <div class="w-10 h-10 rounded-full bg-cyan-100 text-cyan-600 flex items-center justify-center font-bold text-lg mr-4 group-hover:bg-cyan-600 group-hover:text-white transition-colors">2</div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-slate-700 group-hover:text-cyan-700">Information Systems</h4>
                                    <p class="text-xs text-slate-500">Cloud Management, Dashboard</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-xs font-mono font-bold text-slate-600">Weight: 3%</span>
                                    <div class="text-[10px] text-emerald-600 font-medium">Stable</div>
                                </div>
                            </div>
                            <!-- P3 -->
                            <div onclick="switchView('pillar-3')" class="group cursor-pointer flex items-center p-3 rounded-lg border border-slate-100 hover:bg-sky-50 hover:border-sky-200 transition-colors">
                                <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-lg mr-4 group-hover:bg-indigo-600 group-hover:text-white transition-colors">3</div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-slate-700 group-hover:text-indigo-700">Cybersecurity</h4>
                                    <p class="text-xs text-slate-500">NIST Framework, Vendor Gov</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-xs font-mono font-bold text-slate-600">Weight: 5%</span>
                                    <div class="text-[10px] text-amber-600 font-medium">On Process</div>
                                </div>
                            </div>
                            <!-- P4 -->
                            <div onclick="switchView('pillar-4')" class="group cursor-pointer flex items-center p-3 rounded-lg border border-slate-100 hover:bg-sky-50 hover:border-sky-200 transition-colors">
                                <div class="w-10 h-10 rounded-full bg-violet-100 text-violet-600 flex items-center justify-center font-bold text-lg mr-4 group-hover:bg-violet-600 group-hover:text-white transition-colors">4</div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-slate-700 group-hover:text-violet-700">Data Governance</h4>
                                    <p class="text-xs text-slate-500">PDPA Policy, Data Catalog</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-xs font-mono font-bold text-slate-600">Weight: 2%</span>
                                    <div class="text-[10px] text-amber-600 font-medium">On Process</div>
                                </div>
                            </div>
                            <!-- P5 -->
                            <div onclick="switchView('pillar-5')" class="group cursor-pointer flex items-center p-3 rounded-lg border border-slate-100 hover:bg-sky-50 hover:border-sky-200 transition-colors">
                                <div class="w-10 h-10 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center font-bold text-lg mr-4 group-hover:bg-pink-600 group-hover:text-white transition-colors">5</div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-slate-700 group-hover:text-pink-700">People (Digital Literacy)</h4>
                                    <p class="text-xs text-slate-500">AI Training, Phishing Sim</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-xs font-mono font-bold text-slate-600">Weight: 8%</span>
                                    <div class="text-[10px] text-emerald-600 font-medium">On Track</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: DYNAMIC PILLAR DETAIL -->
            <section id="view-pillar-detail" class="hidden fade-in max-w-6xl mx-auto">
                <header class="mb-6 flex flex-col md:flex-row md:items-center justify-between border-b border-slate-200 pb-4">
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <span id="detail-pillar-id" class="px-2 py-0.5 rounded text-[10px] font-bold bg-slate-200 text-slate-600 uppercase tracking-wider">Pillar X</span>
                            <span id="detail-pillar-weight" class="text-xs text-slate-500 font-mono">Weight: 0%</span>
                        </div>
                        <h2 id="detail-pillar-title" class="text-2xl font-bold text-slate-800">Pillar Title Here</h2>
                    </div>
                    <div class="mt-4 md:mt-0 text-right">
                        <p class="text-xs text-slate-500 uppercase">Total Budget</p>
                        <p id="detail-pillar-budget" class="text-2xl font-bold text-slate-800 font-mono">0.00 THB</p>
                    </div>
                </header>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    <!-- Left: Project List -->
                    <div class="lg:col-span-4 space-y-4" id="project-list-container">
                        <!-- Project Cards Injected Here -->
                    </div>

                    <!-- Right: Logic Model Visualization -->
                    <div class="lg:col-span-8">
                        <div id="logic-model-view" class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden min-h-[500px] sticky top-6">
                            <!-- Header -->
                            <div class="bg-slate-800 p-4 border-b border-slate-700 flex justify-between items-center">
                                <div>
                                    <p class="text-[10px] text-slate-400 uppercase tracking-wider font-bold">Project Logic Model</p>
                                    <h3 id="logic-project-name" class="text-white font-bold text-lg">Select a project...</h3>
                                </div>
                                <div class="text-right">
                                    <span id="logic-project-owner" class="text-xs text-sky-400 bg-slate-900/50 px-2 py-1 rounded">Owner</span>
                                </div>
                            </div>

                            <!-- Content -->
                            <div class="p-6">
                                <!-- Objective Box -->
                                <div class="mb-8 p-4 bg-sky-50 border-l-4 border-sky-500 rounded-r-lg">
                                    <h4 class="text-xs font-bold text-sky-800 uppercase mb-1">Objective (‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå)</h4>
                                    <p id="logic-objective" class="text-sm text-slate-700 font-medium">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£...</p>
                                </div>

                                <!-- Flow -->
                                <div class="relative space-y-6">
                                    <!-- Connecting Line (Vertical) -->
                                    <div class="absolute left-4 top-4 bottom-4 w-0.5 bg-slate-200 -z-10"></div>

                                    <!-- Step 1: Inputs -->
                                    <div class="logic-step relative pl-12">
                                        <div class="absolute left-0 top-0 w-8 h-8 bg-white border-2 border-slate-300 rounded-full flex items-center justify-center font-bold text-xs text-slate-500 z-10">1</div>
                                        <div class="bg-white border border-slate-200 p-4 rounded-lg shadow-sm">
                                            <h5 class="font-bold text-slate-800 text-sm mb-2 flex items-center">
                                                <span class="w-2 h-2 rounded-full bg-slate-400 mr-2"></span> Inputs (‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤)
                                            </h5>
                                            <ul id="logic-inputs" class="list-disc list-inside text-xs text-slate-600 space-y-1"></ul>
                                        </div>
                                    </div>

                                    <!-- Step 2: Activities (Milestones) -->
                                    <div class="logic-step relative pl-12">
                                        <div class="absolute left-0 top-0 w-8 h-8 bg-blue-100 border-2 border-blue-400 rounded-full flex items-center justify-center font-bold text-xs text-blue-700 z-10">2</div>
                                        <div class="bg-blue-50/50 border border-blue-200 p-4 rounded-lg shadow-sm">
                                            <h5 class="font-bold text-blue-800 text-sm mb-2 flex items-center justify-between">
                                                <div class="flex items-center"><span class="w-2 h-2 rounded-full bg-blue-500 mr-2"></span> Activities (Milestones)</div>
                                                <span class="text-[10px] bg-blue-200 text-blue-800 px-1.5 py-0.5 rounded">Tracking</span>
                                            </h5>
                                            <div id="logic-activities" class="space-y-2"></div>
                                        </div>
                                    </div>

                                    <!-- Step 3: Outputs -->
                                    <div class="logic-step relative pl-12">
                                        <div class="absolute left-0 top-0 w-8 h-8 bg-indigo-100 border-2 border-indigo-400 rounded-full flex items-center justify-center font-bold text-xs text-indigo-700 z-10">3</div>
                                        <div class="bg-indigo-50/50 border border-indigo-200 p-4 rounded-lg shadow-sm">
                                            <h5 class="font-bold text-indigo-800 text-sm mb-2 flex items-center">
                                                <span class="w-2 h-2 rounded-full bg-indigo-500 mr-2"></span> Outputs (‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï)
                                            </h5>
                                            <p id="logic-outputs" class="text-xs text-slate-700"></p>
                                        </div>
                                    </div>

                                    <!-- Step 4: Outcomes & Impacts -->
                                    <div class="logic-step relative pl-12">
                                        <div class="absolute left-0 top-0 w-8 h-8 bg-emerald-100 border-2 border-emerald-400 rounded-full flex items-center justify-center font-bold text-xs text-emerald-700 z-10">4</div>
                                        <div class="bg-gradient-to-br from-emerald-50 to-white border border-emerald-200 p-4 rounded-lg shadow-md">
                                            <h5 class="font-bold text-emerald-800 text-sm mb-3 flex items-center">
                                                <span class="w-2 h-2 rounded-full bg-emerald-500 mr-2"></span> Outcomes & Impacts
                                            </h5>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <div>
                                                    <p class="text-[10px] uppercase font-bold text-emerald-600 mb-1">Outcomes (‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå)</p>
                                                    <ul id="logic-outcomes" class="list-disc list-inside text-xs text-slate-700 space-y-1"></ul>
                                                </div>
                                                <div class="md:border-l md:border-emerald-100 md:pl-4">
                                                    <p class="text-[10px] uppercase font-bold text-emerald-600 mb-1">Impacts (‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö)</p>
                                                    <ul id="logic-impacts" class="list-disc list-inside text-xs text-slate-700 space-y-1"></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: MEASUREMENTS -->
            <section id="view-measurements" class="hidden fade-in max-w-6xl mx-auto">
                <header class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800 mb-2">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏î‡∏ú‡∏• (Measurement Matrix)</h2>
                    <p class="text-slate-600">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö KPI ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Standard) ‡∏Å‡∏±‡∏ö OKR ‡∏ó‡∏µ‡πà‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ (Challenge)</p>
                </header>

                <div class="bg-white shadow-sm rounded-lg border border-slate-200 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-slate-200">
                            <thead class="bg-slate-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Project</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider">Weight</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-600 uppercase tracking-wider bg-blue-50">Standard KPI (Output)</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-emerald-600 uppercase tracking-wider bg-emerald-50">Challenge OKR (Outcome)</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-slate-200" id="measurement-table-body">
                                <!-- JS Injected -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: RISKS -->
            <section id="view-risks" class="hidden fade-in max-w-6xl mx-auto">
                <header class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-800 mb-2">‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á (Risk Management)</h2>
                    <p class="text-slate-600">‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠</p>
                </header>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="risks-container">
                    <!-- JS Injected -->
                </div>
            </section>

        </div>
    </main>

    <script>
        // --- DATA STORE (Updated Weights & Activities) ---
        const pillars = {
            'pillar-1': {
                id: '1',
                title: 'Infrastructure',
                budget: '6,197,100',
                weight: '82%', // 55% + 25% + 2%
                projects: [
                    {
                        id: '1.1',
                        name: '1.1 ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (MA)',
                        owner: 'IT Support Team',
                        status: 'On Track',
                        budget: '4,112,300',
                        weight: '55%',
                        objective: '‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î‡∏ä‡∏∞‡∏á‡∏±‡∏Å',
                        inputs: ['‡∏á‡∏ö‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô', '‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô IT Support', 'Vendor ‡∏Ñ‡∏π‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤'],
                        activities: [
                            { task: '‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏ License/‡∏™‡∏±‡∏ç‡∏ç‡∏≤', progress: '20%' },
                            { task: 'PM & Report Q1', progress: '20%' },
                            { task: 'PM & Report Q2', progress: '20%' },
                            { task: 'PM & Report Q3', progress: '20%' },
                            { task: 'PM & Report Q4', progress: '20%' }
                        ],
                        outputs: '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤ 4 ‡∏â‡∏ö‡∏±‡∏ö/‡∏õ‡∏µ',
                        outcomes: ['‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á Hardware Failure', '‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πà‡∏°'],
                        impacts: ['‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏´‡πâ Stakeholder', '‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå'],
                        kpi: 'Uptime > 99.5%',
                        okr: 'Zero Unplanned Downtime'
                    },
                    {
                        id: '1.2',
                        name: '1.2 ‡∏à‡∏±‡∏î‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ß‡∏á‡∏à‡∏£‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (Hardware Refresh)',
                        owner: 'Committees',
                        status: 'Delayed',
                        budget: '2,084,800',
                        weight: '25%',
                        objective: '‡∏ó‡∏î‡πÅ‡∏ó‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á EOL ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Hybrid Work',
                        inputs: ['‡∏á‡∏ö‡∏•‡∏á‡∏ó‡∏∏‡∏ô 2.08 ‡∏•‡πâ‡∏≤‡∏ô', '‡∏Ñ‡∏ì‡∏∞‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠/‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏±‡∏ö'],
                        activities: [
                            { task: '‡∏™‡∏≥‡∏£‡∏ß‡∏à & ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Spec', progress: '10%' },
                            { task: '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ TOR & ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á', progress: '20%' },
                            { task: '‡πÑ‡∏î‡πâ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ e-Bidding', progress: '30%' },
                            { task: '‡∏•‡∏á‡∏ô‡∏≤‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤', progress: '10%' },
                            { task: '‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö & ‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏±‡∏ö', progress: '30%' }
                        ],
                        outputs: '‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö 100% (44 ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)',
                        outcomes: ['Boot ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô', 'Ticket ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°‡∏•‡∏î‡∏•‡∏á'],
                        impacts: ['‡πÄ‡∏û‡∏¥‡πà‡∏° Productivity', '‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå Agile Gov'],
                        kpi: '‡πÄ‡∏ö‡∏¥‡∏Å‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Q3',
                        okr: 'Satisfaction Score > 4.5/5.0'
                    },
                    {
                        id: '1.3',
                        name: '1.3 ‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏ö (HCI Study)',
                        owner: 'System Engineer',
                        status: 'On Track',
                        budget: '0',
                        weight: '2%',
                        objective: '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ/‡∏á‡∏ö‡∏Ø ‡∏õ‡∏µ‡∏´‡∏ô‡πâ‡∏≤',
                        inputs: ['‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á Engineer', 'Log Data'],
                        activities: [
                            { task: 'Sizing & Requirement', progress: '30%' },
                            { task: 'Market Sounding', progress: '30%' },
                            { task: 'Final Blueprint & TOR', progress: '40%' }
                        ],
                        outputs: 'TOR ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå',
                        outcomes: ['‡πÑ‡∏î‡πâ‡∏™‡πÄ‡∏õ‡∏Å‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤', '‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏™‡πÄ‡∏õ‡∏Å'],
                        impacts: ['Business Continuity ‡∏õ‡∏µ 2570'],
                        kpi: '‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Q4',
                        okr: '‡∏•‡∏î TCO ‡∏õ‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á 10%'
                    }
                ]
            },
            'pillar-2': {
                id: '2',
                title: 'Information Systems',
                budget: '0 (Included in MA)',
                weight: '3%',
                projects: [
                    {
                        id: '2.1',
                        name: '2.1 ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô‡∏Ñ‡∏•‡∏≤‡∏ß‡∏î‡πå & Dashboard',
                        owner: 'IT Admin / Data Team',
                        status: 'Stable',
                        budget: '0',
                        weight: '3%',
                        objective: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÑ‡∏î‡πâ',
                        inputs: ['‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà Cloud', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö'],
                        activities: [
                            { task: 'Setup Backup Routine', progress: '20%' },
                            { task: 'Dashboard Requirement', progress: '20%' },
                            { task: 'Dashboard Dev', progress: '40%' },
                            { task: 'Deploy & UAT', progress: '20%' }
                        ],
                        outputs: '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠, Dashboard 1 ‡∏£‡∏∞‡∏ö‡∏ö',
                        outcomes: ['‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢ (Zero Data Loss)', '‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à'],
                        impacts: ['Data-Driven Decision Making'],
                        kpi: 'Recovery Success 100%',
                        okr: 'User ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Dashboard > 50%'
                    }
                ]
            },
            'pillar-3': {
                id: '3',
                title: 'Cybersecurity',
                budget: '0',
                weight: '5%', // 3% + 2%
                projects: [
                    {
                        id: '3.1',
                        name: '3.1 ‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (NIST)',
                        owner: 'Security Team',
                        status: 'On Process',
                        budget: '0',
                        weight: '3%',
                        objective: '‡∏õ‡∏¥‡∏î‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô NIST',
                        inputs: ['Tools Scan', '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô'],
                        activities: [
                            { task: 'VA Scan & Report', progress: '30%' },
                            { task: 'User Access Review', progress: '20%' },
                            { task: 'DR Plan Prep', progress: '20%' },
                            { task: 'DR Drill Execution', progress: '30%' }
                        ],
                        outputs: '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô VA Scan, ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô DR Drill',
                        outcomes: ['‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ñ‡∏π‡∏Å‡πÇ‡∏à‡∏°‡∏ï‡∏µ', '‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤'],
                        impacts: ['‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô'],
                        kpi: '‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà Critical ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç 100%',
                        okr: '‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô NIST ‡∏£‡∏∞‡∏î‡∏±‡∏ö 3'
                    },
                    {
                        id: '3.2',
                        name: '3.2 ‡∏ò‡∏£‡∏£‡∏°‡∏≤‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Vendor Gov)',
                        owner: 'IT Manager',
                        status: 'On Process',
                        budget: '0',
                        weight: '2%',
                        objective: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πÑ‡∏Å‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏î‡∏π‡πÅ‡∏• Vendor',
                        inputs: ['‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á', '‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î TOR'],
                        activities: [
                            { task: '‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç TOR', progress: '20%' },
                            { task: 'SLA Review ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', progress: '40%' },
                            { task: '‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå', progress: '40%' }
                        ],
                        outputs: '‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≤‡∏Å Vendor',
                        outcomes: ['‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡∏ï‡∏±‡∏ß‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• (Vendor Lock-in)'],
                        impacts: ['‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á'],
                        kpi: 'Vendor ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏Å‡∏é 100%',
                        okr: 'Zero Contract Dispute'
                    }
                ]
            },
            'pillar-4': {
                id: '4',
                title: 'Data Governance',
                budget: '0',
                weight: '2%',
                projects: [
                    {
                        id: '4.1',
                        name: '4.1 ‡∏ò‡∏£‡∏£‡∏°‡∏≤‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• & PDPA',
                        owner: 'DPO / Working Group',
                        status: 'On Process',
                        budget: '0',
                        weight: '2%',
                        objective: '‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                        inputs: ['‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô', '‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ PDPA'],
                        activities: [
                            { task: '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô', progress: '10%' },
                            { task: '‡∏£‡πà‡∏≤‡∏á‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢', progress: '30%' },
                            { task: '‡∏ó‡∏≥ Data Catalog', progress: '40%' },
                            { task: '‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏ä‡πâ‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢', progress: '20%' }
                        ],
                        outputs: '‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡∏ú‡∏±‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                        outcomes: ['‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Data Quality)', '‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢'],
                        impacts: ['Compliance ‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢'],
                        kpi: 'Data Breach = 0 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á',
                        okr: '100% Staff ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö PDPA'
                    }
                ]
            },
            'pillar-5': {
                id: '5',
                title: 'People',
                budget: '605,000',
                weight: '8%',
                projects: [
                    {
                        id: '5.1',
                        name: '5.1 ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• (Digital Literacy)',
                        owner: 'HR / IT Training',
                        status: 'On Track',
                        budget: '605,000',
                        weight: '8%',
                        objective: '‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Ñ‡∏ô‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏†‡∏±‡∏¢‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞ AI',
                        inputs: ['‡∏á‡∏ö‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°', '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£'],
                        activities: [
                            { task: '‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£', progress: '20%' },
                            { task: 'Workshop Phase 1: Security', progress: '30%' },
                            { task: 'Workshop Phase 2: AI', progress: '30%' },
                            { task: 'Phishing Test & Report', progress: '20%' }
                        ],
                        outputs: '‡∏ú‡∏π‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏ö‡∏£‡∏° > 80% (25 ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£)',
                        outcomes: ['‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏±‡∏ô‡∏†‡∏±‡∏¢‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå', '‡πÉ‡∏ä‡πâ AI ‡πÄ‡∏õ‡πá‡∏ô'],
                        impacts: ['‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•'],
                        kpi: 'Phishing Click Rate < 5%',
                        okr: '100% Departments ‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á'
                    }
                ]
            }
        };

        const risks = [
            {
                title: '‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠ Hardware ‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤',
                level: 'High',
                impact: '‡πÄ‡∏ö‡∏¥‡∏Å‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô Q3, ‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏ä‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏á‡∏≤‡∏ô',
                mitigation: '‡πÄ‡∏£‡πà‡∏á‡∏ó‡∏≥ TOR ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô ‡∏Å.‡∏û. ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ e-Market ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô'
            },
            {
                title: 'User Adoption (‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà)',
                level: 'Medium',
                impact: '‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏£‡∏á‡∏ï‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≥',
                mitigation: '‡∏ï‡∏±‡πâ‡∏á Digital Champion ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏ö‡∏™‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠'
            },
            {
                title: '‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏õ‡∏µ 2570 ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥',
                level: 'High',
                impact: '‡∏£‡∏∞‡∏ö‡∏ö HCI ‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏û‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô',
                mitigation: '‡πÄ‡∏Å‡πá‡∏ö Log ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥ Evidence-based Budgeting'
            }
        ];

        // --- UI LOGIC ---

        function init() {
            renderNav();
            renderChart();
            renderRisks();
            renderMeasurements();
            switchView('dashboard'); // Default view
        }

        function renderNav() {
            const nav = document.getElementById('sidebar-nav');
            const mobileNav = document.getElementById('mobile-nav-list');
            
            // Common links
            const links = [
                { id: 'dashboard', label: 'üìä Dashboard Overview', color: 'text-slate-600' },
                { spacer: true, label: 'Strategic Pillars' },
                { id: 'pillar-1', label: '1. Infrastructure', color: 'text-blue-600' },
                { id: 'pillar-2', label: '2. Info Systems', color: 'text-cyan-600' },
                { id: 'pillar-3', label: '3. Cybersecurity', color: 'text-indigo-600' },
                { id: 'pillar-4', label: '4. Data Governance', color: 'text-violet-600' },
                { id: 'pillar-5', label: '5. People', color: 'text-pink-600' },
                { spacer: true, label: 'Analysis' },
                { id: 'measurements', label: 'üìà Measurements (KPI/OKR)', color: 'text-slate-600' },
                { id: 'risks', label: '‚ö†Ô∏è Risk Management', color: 'text-slate-600' }
            ];

            const createBtn = (l, isMobile) => {
                if (l.spacer) {
                    return `<div class="px-6 py-2 mt-2 text-xs font-bold text-slate-400 uppercase tracking-wider">${l.label}</div>`;
                }
                return `<button onclick="switchView('${l.id}'); ${isMobile ? 'toggleMobileMenu()' : ''}" 
                        id="nav-${l.id}${isMobile ? '-m' : ''}" 
                        class="w-full text-left px-6 py-2.5 text-sm font-medium hover:bg-slate-50 transition-colors ${l.color} border-r-4 border-transparent">
                        ${l.label}
                    </button>`;
            };

            nav.innerHTML = links.map(l => createBtn(l, false)).join('');
            mobileNav.innerHTML = links.map(l => createBtn(l, true)).join('');
        }

        function switchView(viewId) {
            // Hide all
            ['view-dashboard', 'view-pillar-detail', 'view-measurements', 'view-risks'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });

            // Handle Pillar View Logic
            if (viewId.startsWith('pillar-')) {
                renderPillarDetail(viewId);
                document.getElementById('view-pillar-detail').classList.remove('hidden');
            } else {
                document.getElementById('view-' + viewId).classList.remove('hidden');
            }

            // Update Nav State
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active-nav'));
            const activeDesktop = document.getElementById('nav-' + viewId);
            if(activeDesktop) activeDesktop.classList.add('active-nav');
        }

        function renderPillarDetail(pillarId) {
            const data = pillars[pillarId];
            
            // Header
            document.getElementById('detail-pillar-title').innerText = data.title;
            document.getElementById('detail-pillar-id').innerText = `Pillar ${data.id}`;
            document.getElementById('detail-pillar-weight').innerText = `Weight: ${data.weight}`;
            document.getElementById('detail-pillar-budget').innerText = `${data.budget} THB`;

            // Project List
            const listContainer = document.getElementById('project-list-container');
            listContainer.innerHTML = '';
            
            data.projects.forEach((proj, idx) => {
                const card = document.createElement('div');
                card.className = 'bg-white p-4 rounded-lg border border-slate-200 hover:border-sky-400 hover:shadow-md cursor-pointer transition-all';
                card.onclick = () => renderLogicModel(pillarId, idx);
                
                // Status Badge Color
                let statusColor = 'bg-slate-100 text-slate-600';
                if(proj.status === 'On Track') statusColor = 'bg-emerald-100 text-emerald-700';
                if(proj.status === 'Delayed') statusColor = 'bg-red-100 text-red-700';
                if(proj.status === 'On Process') statusColor = 'bg-amber-100 text-amber-700';
                if(proj.status === 'Stable') statusColor = 'bg-blue-100 text-blue-700';

                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-bold px-2 py-0.5 rounded ${statusColor}">${proj.status}</span>
                        <span class="text-xs text-slate-400 font-mono">${proj.weight}</span>
                    </div>
                    <h4 class="font-bold text-slate-800 mb-1">${proj.name}</h4>
                    <p class="text-xs text-slate-500 mb-3">${proj.owner}</p>
                    <div class="text-xs text-sky-600 font-medium flex items-center">
                        View Logic Model <span class="ml-1">‚ûú</span>
                    </div>
                `;
                listContainer.appendChild(card);
            });

            // Select first project by default
            if(data.projects.length > 0) {
                renderLogicModel(pillarId, 0);
            }
        }

        function renderLogicModel(pillarId, projectIdx) {
            const proj = pillars[pillarId].projects[projectIdx];
            
            document.getElementById('logic-project-name').innerText = proj.name;
            document.getElementById('logic-project-owner').innerText = proj.owner;
            document.getElementById('logic-objective').innerText = proj.objective;
            
            const fillList = (id, arr) => {
                const el = document.getElementById(id);
                el.innerHTML = '';
                if(Array.isArray(arr)) {
                    arr.forEach(item => {
                        const li = document.createElement('li');
                        li.innerText = item;
                        el.appendChild(li);
                    });
                } else {
                    el.innerText = arr;
                }
            };

            fillList('logic-inputs', proj.inputs);

            // Handle Milestones (Activities)
            const activitiesEl = document.getElementById('logic-activities');
            activitiesEl.innerHTML = '';
            proj.activities.forEach((act, i) => {
                const row = document.createElement('div');
                row.className = 'flex justify-between items-center text-xs text-slate-600 border-b border-blue-100 pb-1 last:border-0';
                row.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-4 text-slate-400 mr-1">${i+1}.</span>
                        <span>${act.task}</span>
                    </div>
                    <span class="font-mono font-bold text-blue-600 bg-blue-50 px-1 rounded">${act.progress}</span>
                `;
                activitiesEl.appendChild(row);
            });

            // Outputs
            if(Array.isArray(proj.outputs)){
                 fillList('logic-outputs', proj.outputs);
            } else {
                 document.getElementById('logic-outputs').innerHTML = proj.outputs;
            }
            
            fillList('logic-outcomes', proj.outcomes);
            fillList('logic-impacts', proj.impacts);
        }

        function renderMeasurements() {
            const tbody = document.getElementById('measurement-table-body');
            tbody.innerHTML = '';
            
            Object.values(pillars).forEach(pillar => {
                pillar.projects.forEach(proj => {
                    const tr = document.createElement('tr');
                    tr.className = 'hover:bg-slate-50';
                    tr.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900">${proj.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-slate-500 font-mono">${proj.weight}</td>
                        <td class="px-6 py-4 text-sm text-blue-700 bg-blue-50/30 border-l-2 border-blue-200">${proj.kpi}</td>
                        <td class="px-6 py-4 text-sm text-emerald-700 bg-emerald-50/30 border-l-2 border-emerald-200 font-semibold">${proj.okr}</td>
                    `;
                    tbody.appendChild(tr);
                });
            });
        }

        function renderRisks() {
            const container = document.getElementById('risks-container');
            container.innerHTML = risks.map(r => {
                const color = r.level === 'High' ? 'red' : 'amber';
                return `
                    <div class="bg-white rounded-lg border-l-4 border-${color}-500 shadow-sm p-5 hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="font-bold text-slate-800">${r.title}</h4>
                            <span class="px-2 py-0.5 bg-${color}-100 text-${color}-800 text-[10px] uppercase font-bold rounded">${r.level}</span>
                        </div>
                        <div class="space-y-3">
                            <div>
                                <p class="text-[10px] font-bold text-slate-400 uppercase">Impact</p>
                                <p class="text-sm text-slate-600">${r.impact}</p>
                            </div>
                            <div>
                                <p class="text-[10px] font-bold text-slate-400 uppercase">Mitigation</p>
                                <p class="text-sm text-slate-800 font-medium">${r.mitigation}</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderChart() {
            const ctx = document.getElementById('budgetChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Infrastructure', 'People', 'Other (Internal)'],
                    datasets: [{
                        data: [6197100, 605000, 0], // Approximate
                        backgroundColor: ['#3b82f6', '#ec4899', '#94a3b8'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { font: { family: 'Sarabun', size: 10 }, boxWidth: 10 } }
                    },
                    cutout: '75%'
                }
            });
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // Init
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
